# üìñ Manual de Automa√ß√µes - Dashboard Sabrina Costa
## Guia Completo de Uso

**Vers√£o:** 1.0.0  
**Data:** 01/11/2025  
**Status:** ‚úÖ Ativo

---

## üìë √çndice

1. [Introdu√ß√£o](#introdu√ß√£o)
2. [Conceitos B√°sicos](#conceitos-b√°sicos)
3. [Modos de Automa√ß√£o](#modos-de-automa√ß√£o)
4. [Como Ativar/Desativar Workflows](#como-ativardesativar-workflows)
5. [Sistema de Aprova√ß√µes](#sistema-de-aprova√ß√µes)
6. [Comandos WhatsApp](#comandos-whatsapp)
7. [Guia por Workflow](#guia-por-workflow)
8. [Troubleshooting](#troubleshooting)
9. [FAQ](#faq)

---

## üéØ Introdu√ß√£o

Este sistema oferece **13 workflows automatizados** para gerenciar crescimento no Instagram, campanhas Meta Ads e gera√ß√£o de conte√∫do com IA.

### Princ√≠pio Fundamental: VOC√ä EST√Å NO CONTROLE

- ‚ùå Nada executa automaticamente sem sua permiss√£o
- ‚úÖ Todas a√ß√µes importantes precisam de aprova√ß√£o
- ‚úÖ Kill Switch dispon√≠vel para emerg√™ncias
- ‚úÖ Custos de IA controlados (max R$ 50/m√™s)

---

## üìö Conceitos B√°sicos

### O que √© um Workflow?

Um **workflow** √© uma automa√ß√£o que executa tarefas espec√≠ficas. Exemplo:
- "Gerar Legendas" = Workflow que usa IA para criar legendas
- "Alertas WhatsApp" = Workflow que avisa quando m√©tricas est√£o ruins

### Status de um Workflow

- **Enabled (Ativado):** ‚úÖ Workflow est√° rodando
- **Disabled (Desativado):** ‚ùå Workflow est√° pausado
- **Requires Approval:** ‚ö†Ô∏è Workflow precisa de sua aprova√ß√£o antes de agir

### Tipos de Workflows

1. **B√°sicos (4):** J√° ativos, seguros, apenas leitura
2. **IA - Campanhas (2):** Desligados, precisam aprova√ß√£o sempre
3. **IA - Conte√∫do (4):** Desligados, precisam aprova√ß√£o sempre
4. **Tracking (3):** Desligados, seguros (apenas leitura)

---

## ‚öôÔ∏è Modos de Automa√ß√£o

Cada workflow tem um **modo** que define seu comportamento:

### 1. MANUAL (Padr√£o, Recomendado)
- Workflow analisa e **APENAS NOTIFICA**
- **NADA √© executado automaticamente**
- Voc√™ recebe sugest√£o via WhatsApp
- Voc√™ decide se aprova ou rejeita

**Exemplo:** Workflow detecta campanha com CTR baixo ‚Üí Envia sugest√£o "Pausar campanha X?" ‚Üí Aguarda sua resposta ‚Üí S√≥ pausa SE voc√™ aprovar

**Use para:** Campanhas, postagens, qualquer a√ß√£o importante

### 2. SEMI-AUTO
- Workflow executa a√ß√µes **sem risco**
- N√£o precisa aprova√ß√£o para an√°lises
- Voc√™ recebe relat√≥rios automaticamente

**Exemplo:** An√°lise preditiva roda todo dia, gera previs√£o e envia ‚Üí Nenhuma a√ß√£o √© tomada, apenas informa√ß√£o

**Use para:** An√°lises, relat√≥rios, recomenda√ß√µes

### 3. AUTO (Perigoso, N√ÉO recomendado inicialmente)
- Workflow executa a√ß√µes **automaticamente**
- Notifica DEPOIS de executar
- Tem kill switch e rollback

**Exemplo:** Sistema pausa campanha automaticamente se CTR < 1%

**‚ö†Ô∏è N√ÉO ATIVE AUTO sem testar muito em MANUAL primeiro!**

---

## üîÑ Como Ativar/Desativar Workflows

### M√©todo 1: Via Frontend (Recomendado)

1. Acessar: `https://[seu-dominio]/configuracoes-automacao.html`
2. Encontrar workflow desejado na lista
3. Clicar no **toggle** (bot√£o deslizante)
   - Verde = Ativo ‚úÖ
   - Cinza = Desativado ‚ùå
4. Clicar em **"Salvar"**

### M√©todo 2: Via WhatsApp (R√°pido)

```bash
# Ativar workflow
/ativar-{nome-do-workflow}

# Exemplos:
/ativar-gerar-legendas
/ativar-reels-fund-tracker
/ativar-otimizar-campanhas

# Desativar workflow
/desativar-{nome-do-workflow}

# Exemplos:
/desativar-gerar-legendas
/desativar-alertas-whatsapp
```

### M√©todo 3: Via API (Avan√ßado)

```bash
# Ativar
curl -X PUT https://api.example.com/api/automations/gerar-legendas/toggle \
  -H "Authorization: Bearer SEU_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"enabled": true}'

# Desativar
curl -X PUT https://api.example.com/api/automations/gerar-legendas/toggle \
  -H "Authorization: Bearer SEU_TOKEN" \
  -d '{"enabled": false}'
```

### üö® KILL SWITCH - Desligar TUDO em 1 Clique

**Quando usar:** Emerg√™ncia, algo deu errado, comportamento estranho

**Como ativar:**

1. **Via Frontend:** Bot√£o vermelho grande "KILL SWITCH"
2. **Via WhatsApp:** `/pausar-tudo`
3. **Via API:** `POST /api/automations/kill-switch`

**O que acontece:**
- ‚úÖ TODOS workflows desligados imediatamente
- ‚úÖ Aprova√ß√µes pendentes expiradas
- ‚úÖ Notifica√ß√£o enviada
- ‚úÖ Voc√™ recebe confirma√ß√£o

**Como religar:**
- Ativar workflows um por um (manualmente)
- Investigar causa antes de religar

---

## ‚úÖ Sistema de Aprova√ß√µes

### Como Funciona

1. Workflow detecta situa√ß√£o (ex: CTR baixo)
2. Cria **sugest√£o de a√ß√£o** (ex: "Pausar campanha")
3. Salva na fila de aprova√ß√µes
4. **Envia WhatsApp** com detalhes
5. **Aguarda sua decis√£o** (at√© 24h)
6. Se voc√™ aprovar ‚Üí Executa a√ß√£o
7. Se voc√™ rejeitar ‚Üí Descarta sugest√£o
8. Se expirar (24h) ‚Üí Descarta automaticamente

### Exemplo Real

```
üîî SUGEST√ÉO - Campanha "Seguidores RJ"

Problema detectado:
- CTR: 1.5% (abaixo da meta de 2%)
- Gasto √∫ltimas 24h: R$ 18.50
- Resultado: 2 novos seguidores

Sugest√£o: Pausar campanha
Impacto: Economia ~R$ 20/dia

Aprovar esta a√ß√£o?
‚úÖ /aprovar-camp-abc123
‚ùå /rejeitar-camp-abc123
üìä /detalhes-camp-abc123

‚è∞ Expira em: 24 horas
```

### Aprovando uma A√ß√£o

**Via WhatsApp:**
```bash
/aprovar-camp-abc123
```

**Resultado:**
```
‚úÖ A√ß√£o aprovada!

A campanha "Seguidores RJ" ser√° pausada nos pr√≥ximos minutos.
Voc√™ receber√° confirma√ß√£o quando conclu√≠do.
```

### Rejeitando uma A√ß√£o

**Via WhatsApp:**
```bash
/rejeitar-camp-abc123
# Opcional: adicionar motivo
/rejeitar-camp-abc123 Quero dar mais tempo para testar
```

**Resultado:**
```
‚ùå A√ß√£o rejeitada

A campanha "Seguidores RJ" continuar√° ativa.
Sugest√£o descartada.
```

### Ver Detalhes de uma Aprova√ß√£o

```bash
/detalhes-camp-abc123
```

**Resultado:**
```
üìä DETALHES - Campanha "Seguidores RJ"

M√©tricas √∫ltimos 7 dias:
- Impress√µes: 12.450
- Cliques: 187 (CTR 1.5%)
- CPC: R$ 0.92
- Seguidores: 14 (CPS: R$ 1.32)

Hist√≥rico:
- Dia 1-3: CTR 2.8% (bom)
- Dia 4-5: CTR 1.9% (caindo)
- Dia 6-7: CTR 1.5% (abaixo meta)

Recomenda√ß√£o do sistema:
Pausar e criar nova campanha com targeting refinado
```

### Ver Hist√≥rico de Aprova√ß√µes

```bash
/historico
```

**Resultado:**
```
üìã HIST√ìRICO (√∫ltimas 10 a√ß√µes)

1. ‚úÖ APROVADA - Pausar campanha "Seg RJ"
   01/11 15:30 - Executada com sucesso

2. ‚ùå REJEITADA - Aumentar budget "Mulheres SP"
   01/11 14:20 - Motivo: "Ainda testando"

3. ‚è∞ EXPIRADA - Ajustar targeting "Beleza Nacional"
   31/10 19:00 - N√£o respondido em 24h

...
```

---

## üí¨ Comandos WhatsApp

### Comandos de Controle

| Comando | Descri√ß√£o | Exemplo |
|---------|-----------|---------|
| `/status` | Ver status de todos workflows | `/status` |
| `/ativar-{nome}` | Ativar workflow espec√≠fico | `/ativar-gerar-legendas` |
| `/desativar-{nome}` | Desativar workflow | `/desativar-alertas-whatsapp` |
| `/pausar-tudo` | KILL SWITCH (emerg√™ncia) | `/pausar-tudo` |

### Comandos de Aprova√ß√£o

| Comando | Descri√ß√£o | Exemplo |
|---------|-----------|---------|
| `/aprovar-{id}` | Aprovar a√ß√£o pendente | `/aprovar-camp-123` |
| `/rejeitar-{id}` | Rejeitar a√ß√£o | `/rejeitar-camp-123` |
| `/detalhes-{id}` | Ver mais informa√ß√µes | `/detalhes-camp-123` |
| `/historico` | √öltimas 10 a√ß√µes | `/historico` |

### Comandos de Custos IA

| Comando | Descri√ß√£o | Exemplo |
|---------|-----------|---------|
| `/custos` | Ver gastos IA do m√™s | `/custos` |
| `/aumentar-budget {valor}` | Aumentar budget IA | `/aumentar-budget 100` |
| `/manter-pausado` | Manter workflows pausados (ap√≥s 90%) | `/manter-pausado` |

### Comandos de Conte√∫do

| Comando | Descri√ß√£o | Exemplo |
|---------|-----------|---------|
| `/legenda {tema}` | Gerar legenda com IA | `/legenda Rotina de skincare` |
| `/recomendar` | Pedir recomenda√ß√µes de temas | `/recomendar` |
| `/dicas {produto}` | Gerar dicas de produto | `/dicas S√©rum vitamina C` |

---

## üìã Guia por Workflow

### üîπ Workflow 05: Otimizar Campanhas

**O que faz:** Analisa campanhas Meta Ads e sugere otimiza√ß√µes

**Quando usar:** Quando tem campanhas ativas no Meta Ads

**Como ativar:**
```bash
/ativar-otimizar-campanhas
```

**Configura√ß√£o recomendada:**
- Modo: Manual
- Requer aprova√ß√£o: SIM
- Frequ√™ncia: A cada 2 horas

**Exemplo de uso:**
1. Voc√™ ativa o workflow
2. Sistema roda a cada 2h
3. Se detectar CTR < 2%, envia sugest√£o
4. Voc√™ aprova ou rejeita
5. Se aprovar, campanha √© pausada
6. Voc√™ recebe confirma√ß√£o

**Quando desativar:**
- Quando n√£o tem campanhas ativas
- Quando quer controlar 100% manualmente

---

### üîπ Workflow 06: Gerar Legendas

**O que faz:** Gera legendas aut√™nticas para Instagram com IA

**Quando usar:** Quando precisa de ideias para legendas

**Como usar:**
```bash
# 1. Ativar workflow
/ativar-gerar-legendas

# 2. Pedir legenda
/legenda Minha rotina matinal de skincare

# 3. Aguardar resposta (15-30s)
# 4. Revisar legenda recebida
# 5. Aprovar, editar ou rejeitar
```

**Exemplo real:**
```
Voc√™: /legenda Minha rotina matinal de skincare

Bot (15s depois):
‚ú® Legenda gerada:

---
Acordar cedo tem seus privil√©gios ‚òÄÔ∏è E o principal deles? Tempo 
pra cuidar de mim antes do dia come√ßar. Minha rotina de skincare 
matinal √© sagrada - 5 minutos que fazem toda diferen√ßa.

Hoje compartilho meus 3 passos essenciais que transformaram minha 
pele üíß‚ú®

Salva pra n√£o esquecer!

#skincare #rotinamatinal #autocuidado #belezareal #cuidadoscomapele
---

Aprovar?
‚úÖ /aprovar-leg-456 (salva como aprovada)
‚úèÔ∏è /editar-leg-456 (envie nova vers√£o)
‚ùå /rejeitar-leg-456 (descarta)
üîÑ /regerar-leg-456 (gera outra)
```

**Prote√ß√µes:**
- ‚úÖ NUNCA posta automaticamente
- ‚úÖ Voc√™ sempre revisa antes
- ‚úÖ Custo: R$ 0 (usa Gemini Pro gratuito)

---

### üîπ Workflow 09: Reels Fund Tracker

**O que faz:** Monitora progresso para meta de 900 seguidores

**Quando usar:** Quando quer acompanhar crescimento automaticamente

**Como ativar:**
```bash
/ativar-reels-fund-tracker
```

**Como funciona:**
1. Roda a cada 6 horas
2. Busca n√∫mero de seguidores (Instagram API)
3. Calcula: faltam quantos, taxa de crescimento, ETA
4. Atualiza dashboard
5. Quando atingir 900 ‚Üí üéâ Celebra√ß√£o

**Exemplo de notifica√ß√£o:**
```
üìä PROGRESSO REELS FUND

Seguidores atuais: 887
Meta: 900
Faltam: 13 seguidores

Taxa crescimento: +2.8/dia (m√©dia 7 dias)
ETA: 5 dias (estimativa)

Voc√™ est√° 98.6% l√°! üöÄ
```

**Prote√ß√µes:**
- ‚úÖ Apenas leitura (n√£o posta, n√£o interage)
- ‚úÖ Zero risco de ban
- ‚úÖ 100% seguro

---

### üîπ Workflow 13: Monitor Custos IA

**O que faz:** Controla gastos com APIs de IA e alerta thresholds

**Quando ativar:** ANTES de ativar qualquer workflow com IA

**Como ativar:**
```bash
/ativar-monitor-custos
```

**Como funciona:**
1. Monitora gastos diariamente
2. Alerta em 50%, 75%
3. **Auto-pausa em 90%** (seguran√ßa financeira)

**Exemplo de alertas:**

**50% (R$ 25):**
```
üü° ALERTA: Budget IA em 50%

Gasto at√© agora: R$ 25.00 / R$ 50.00
Proje√ß√£o m√™s: R$ 42.00 (dentro do limite)

Status: ‚úÖ Tudo OK
Nenhuma a√ß√£o necess√°ria.
```

**75% (R$ 37.50):**
```
üü† ATEN√á√ÉO: Budget IA em 75%

Gasto: R$ 37.50 / R$ 50.00
Proje√ß√£o: R$ 52.00 (pode ultrapassar!)

Recomenda√ß√£o:
- Priorizar apenas APIs gratuitas
- Reduzir frequ√™ncia de an√°lises preditivas
```

**90% (R$ 45) - AUTO-PAUSE:**
```
üî¥ LIMITE CR√çTICO: Budget IA em 90%!

Gasto: R$ 45.00 / R$ 50.00

A√á√ÉO AUTOM√ÅTICA TOMADA:
‚ùå Pausados workflows com custo:
   - Gerar Legendas
   - An√°lise Preditiva
   - Recomendar Conte√∫do

‚úÖ Mantidos ativos (custo zero):
   - Reels Fund Tracker
   - Busca Semanal (Claude Pro)
   - Monitor Custos

O que fazer agora?
/aumentar-budget 100 (aumenta para R$ 100/m√™s)
/manter-pausado (continua pausado)
/usar-apenas-gratuitos (reativa apenas gratuitos)
```

**Prote√ß√£o financeira:**
- ‚úÖ Imposs√≠vel gastar mais que o limite
- ‚úÖ Auto-pause em emerg√™ncia
- ‚úÖ Voc√™ decide quando religar

---

## üîß Troubleshooting

### Problema: Workflow n√£o est√° executando

**Poss√≠veis causas:**
1. Workflow desativado
2. Credenciais API inv√°lidas
3. Erro no N8N

**Solu√ß√£o:**
```bash
# 1. Verificar se est√° ativo
/status

# 2. Se desativado, ativar
/ativar-{nome-workflow}

# 3. Verificar logs (via frontend)
# Acessar: configuracoes-automacao.html > Ver logs
```

### Problema: N√£o recebo notifica√ß√µes WhatsApp

**Poss√≠veis causas:**
1. Evolution API offline
2. N√∫mero n√£o configurado
3. Workflow de notifica√ß√µes desativado

**Solu√ß√£o:**
```bash
# 1. Testar Evolution API
curl https://evolution-api.example.com/health

# 2. Verificar alertas-whatsapp
/status

# 3. Reativar se necess√°rio
/ativar-alertas-whatsapp
```

### Problema: Custo IA muito alto

**A√ß√£o imediata:**
```bash
# 1. Ver gastos atuais
/custos

# 2. Se > R$ 40, pausar workflows caros
/desativar-analise-preditiva
/desativar-gerar-legendas

# 3. Usar apenas gratuitos
/usar-apenas-gratuitos
```

### Problema: A√ß√£o foi executada sem aprova√ß√£o

**A√ß√£o imediata:**
```bash
# 1. KILL SWITCH
/pausar-tudo

# 2. Verificar hist√≥rico
/historico

# 3. Reportar bug
# Entrar em contato com suporte
```

---

## ‚ùì FAQ

### 1. √â seguro usar automa√ß√µes no Instagram?

**R:** SIM, se seguir as regras:
- ‚úÖ NUNCA poste automaticamente
- ‚úÖ Use apenas workflows de leitura (m√©tricas, followers)
- ‚úÖ Respeite rate limits
- ‚ùå N√ÉO automatize coment√°rios, DMs, follows

**Workflows 100% seguros:**
- Reels Fund Tracker (apenas l√™ followers)
- Alertas WhatsApp (apenas l√™ m√©tricas)
- Relat√≥rio Di√°rio (apenas l√™ dados)

**Workflows que requerem cuidado:**
- Gerar Legendas (voc√™ SEMPRE posta manualmente)
- An√°lise Coment√°rios (apenas l√™, n√£o responde)

### 2. Quanto custa por m√™s?

**R:** Estimativa realista: **R$ 0-10/m√™s**

Detalhes:
- Workflows b√°sicos: R$ 0 (n√£o usam IA)
- Gemini Pro: R$ 0 (gr√°tis)
- ChatGPT Pro: R$ 0 (j√° assinado)
- Claude Pro: R$ 0 (j√° assinado)
- OpenAI API (backup): ~R$ 2-5/m√™s

**Prote√ß√£o:** Budget m√°ximo R$ 50/m√™s (auto-pause em 90%)

### 3. Posso ativar tudo de uma vez?

**R:** N√ÉO RECOMENDADO! Ativar gradualmente:

**Semana 1:**
- ‚úÖ Monitor Custos IA (primeiro sempre)
- ‚úÖ Reels Fund Tracker
- ‚úÖ Alertas WhatsApp (se j√° n√£o est√° ativo)

**Semana 2:**
- ‚úÖ Gerar Legendas (testar com 2-3 legendas)
- ‚úÖ Recomendar Conte√∫do

**Semana 3:**
- ‚úÖ Otimizar Campanhas (modo manual)
- ‚úÖ An√°lise Preditiva

**Semana 4:**
- ‚úÖ Busca Semanal Valida√ß√£o
- ‚úÖ An√°lise Coment√°rios

### 4. O que fazer se algo der errado?

**A√ß√£o imediata:**
```bash
# KILL SWITCH
/pausar-tudo
```

Depois:
1. Verificar hist√≥rico de a√ß√µes
2. Identificar qual workflow causou problema
3. Manter desligado
4. Reportar bug

### 5. Como sei se IA est√° funcionando bem?

**Indicadores:**
- ‚úÖ Legendas geradas fazem sentido
- ‚úÖ Recomenda√ß√µes s√£o relevantes
- ‚úÖ Previs√µes est√£o pr√≥ximas da realidade
- ‚úÖ Custo < R$ 10/m√™s

**Se n√£o estiver bom:**
- Ajustar prompts (futuro)
- Mudar modelo de IA
- Reduzir frequ√™ncia

### 6. Posso personalizar os workflows?

**R:** SIM! Vias:

1. **Via Frontend:** Configura√ß√µes avan√ßadas de cada workflow
2. **Via N8N:** Editar workflows diretamente
3. **Via c√≥digo:** Modificar l√≥gica (avan√ßado)

**Exemplo:** Mudar threshold de CTR de 2% para 1.5%

### 7. Kill Switch desliga meu Instagram?

**R:** N√ÉO! Kill Switch apenas:
- ‚ùå Desliga workflows de automa√ß√£o
- ‚ùå Para de enviar notifica√ß√µes
- ‚ùå Pausa an√°lises

**N√ÉO afeta:**
- ‚úÖ Sua conta Instagram (continua normal)
- ‚úÖ Campanhas Meta Ads (continuam rodando)
- ‚úÖ Posts j√° publicados

---

## üìû Suporte

### Problemas T√©cnicos
- **Frontend:** `configuracoes-automacao.html`
- **Logs:** Ver √∫ltima execu√ß√£o de cada workflow
- **API:** Documenta√ß√£o em `/docs/api/`

### Documenta√ß√£o Adicional
- **Master Plan:** `docs/automations/master-plan.md`
- **Seguran√ßa:** `docs/automations/SEGURANCA-INSTAGRAM.md`
- **Backend:** `backend/README.md`

---

**√öltima Atualiza√ß√£o:** 01/11/2025  
**Vers√£o:** 1.0.0

